# 完整架构：从学习到实战

## 我们学到了什么？

让我们回顾一下整个学习路径：

```
01. 基础知识 → 什么是 OHLC 数据
02. 技术指标 → 移动平均线 MA
03. 交易信号 → MA 金叉策略
04. 回测检验 → 验证策略效果
05. 完整架构 → 量化系统全貌 ← 你在这里
```

## 量化系统的完整架构

有了前面的基础，现在我们可以理解完整系统的架构了：

```
┌─────────────────────────────────────────────────────────┐
│                      数据层                               │
│  • 数据源：Tushare、AkShare                              │
│  • 数据存储：原始行情、因子数据、指数数据                 │
│  • 技术指标：MA、MACD、RSI、布林带等                      │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                      策略层                               │
│  • 选股策略：多因子选股                                   │
│  • 择时策略：买卖信号生成                                 │
│  • 对冲策略：风险对冲                                     │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                      回测层                               │
│  • 回测引擎：模拟历史交易                                 │
│  • 绩效分析：收益率、最大回撤、夏普比率                   │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                      风控层                               │
│  • 仓位限制：单票≤10%、行业≤30%                           │
│  • 止损止盈：-8%止损、+15%止盈                            │
│  • 回撤控制：最大回撤≤20%                                 │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                      交易层                               │
│  • 订单管理：下单、撤单、持仓查询                         │
│  • 滑点模拟：预估成交偏差                                 │
│  • 执行算法：最优成交策略                                 │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│                     实盘交易层                             │
│  • 券商接口：真实下单                                     │
│  • 数据网关：实时行情                                     │
│  • 监控告警：异常通知                                     │
└─────────────────────────────────────────────────────────┘
```

## 配置文件的作用

现在你应该能看懂 `config/a_stock.yaml` 了：

```yaml
# 数据源配置：从哪里获取数据
data_sources:
  tushare:
    token: "your_token_here"  # Tushare API密钥

# 交易成本：回测和实盘都要考虑
costs:
  commission:
    rate: 0.00025      # 万2.5佣金
  stamp_duty:
    rate: 0.001        # 0.1%印花税（卖出）

# 风险管理：保护本金
risk_management:
  position:
    max_single_stock: 0.10   # 单票最大10%
    max_sector: 0.30         # 单行业最大30%
  controls:
    max_drawdown: 0.20       # 最大回撤20%
    stop_loss: 0.08          # 止损8%
```

## 项目的完整结构

```
quant/
├── tutorial/          # 教程（自底向上学习）
│   ├── 01-basics/     # 基础知识
│   ├── 02-indicators/ # 技术指标
│   ├── 03-signals/    # 交易信号
│   ├── 04-backtest/   # 回测
│   └── 05-architecture/ # 完整架构
├── designs/           # 详细设计文档
│   ├── architecture/  # 架构图
│   ├── class/         # 类图
│   └── sequence/      # 时序图
├── config/            # 配置文件
├── data/              # 数据存储
├── strategies/        # 策略实现
├── backtesting/       # 回测引擎
├── trading/           # 交易模块
├── live_trading/      # 实盘交易
├── risk_management/   # 风险管理
└── analysis/          # 分析模块
```

## 下一步学习建议

### 阶段1：巩固基础
1. 运行 `tutorial/02-indicators/ma_example.py`
2. 运行 `tutorial/03-signals/simple_strategy.py`
3. 运行 `tutorial/04-backtest/simple_backtest.py`

### 阶段2：深入学习
1. 阅读 `designs/architecture/` - 理解系统架构
2. 阅读 `designs/class/` - 理解代码结构
3. 阅读 `designs/sequence/` - 理解交互流程

### 阶段3：实践开发
1. 获取 Tushare Token
2. 下载真实 A 股数据
3. 实现自己的策略
4. 回测验证效果

### 阶段4：实盘交易
1. 模拟盘测试
2. 小资金试水
3. 风险控制优先
4. 持续优化策略

## 重要提醒

**量化交易不是稳赚不赔的**

- 历史表现不代表未来
- 策略可能失效
- 风险控制最重要
- 持续学习和改进

**免责声明：**
本系统仅供学习和研究使用，实盘交易有风险，投资需谨慎。
