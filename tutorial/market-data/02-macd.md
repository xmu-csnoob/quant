# MACD (Moving Average Convergence Divergence)

> 趋势跟踪指标，基于移动平均线的改进版本，兼具趋势判断和动能分析

---

## 一、原理（为什么需要它？）

### 金融逻辑
- **双MA系统进化**：MACD本质是两条EMA的差值，更敏感
- **趋势与动能**：同时反映趋势方向和变化力度
- **背离信号**：价格与指标背离预示趋势反转

### 解决什么问题
- 纯MA交叉信号滞后，反应太慢
- 需要同时判断趋势方向和动能强弱
- 需要提前发现趋势反转信号（背离）

### 适用场景
- 趋势行情中判断入场时机
- 捕捉趋势反转前的背离信号
- 中短线波段操作

### 指标构成
MACD由三部分组成：

```
        MACD线 (快线)
            |
            |    ┌── 信号线 (慢线)
            |    |
            v    v
         ____________  零轴
         /    |    \
        /     |     \
       /      |      \
      /       |       \
     /        |        \
    /         |         \
   /          |          \
             /           \
            /             \
           /               \
          /                 \
         /                   \
        /                     \
       /                       \
      /                         \
     /                           \
    /                             \
   /                               \
  /                                 \
 /                                   \
/                                     \

柱状图 = MACD - 信号线
```

---

## 二、数学公式（如何计算？）

### 计算步骤

**1. 计算两条EMA**
```
EMA(12) = 12日指数移动平均
EMA(26) = 26日指数移动平均
```

**2. 计算DIF线（MACD快线）**
```
DIF = EMA(12) - EMA(26)
```

**3. 计算DEA线（信号线/慢线）**
```
DEA = EMA(9) of DIF
即对DIF再求9日EMA
```

**4. 计算MACD柱状图**
```
MACD柱 = (DIF - DEA) × 2
```

### 参数说明

| 参数 | 标准值 | 可调范围 | 说明 |
|------|--------|----------|------|
| 快线周期 | 12 | 8-15 | 越小越敏感 |
| 慢线周期 | 26 | 20-30 | 越大越平滑 |
| 信号线周期 | 9 | 6-12 | 控制交叉信号频率 |

### 计算示例

假设某股票收盘价：

| 天数 | 收盘价 | EMA(12) | EMA(26) | DIF | DEA | MACD柱 |
|------|--------|---------|---------|-----|-----|--------|
| 1 | 10.00 | 10.00 | 10.00 | 0 | 0 | 0 |
| 2 | 10.50 | 10.08 | 10.04 | +0.04 | +0.01 | +0.06 |
| 3 | 11.00 | 10.23 | 10.12 | +0.11 | +0.04 | +0.14 |
| 4 | 11.50 | 10.45 | 10.26 | +0.19 | +0.09 | +0.20 |
| 5 | 12.00 | 10.72 | 10.45 | +0.27 | +0.15 | +0.24 |

*注：实际EMA计算涉及平滑系数α=2/(n+1)*

---

## 三、应用（如何使用？）

### 1. 基础信号

| 信号 | 说明 | 图示 |
|------|------|------|
| **金叉（买入）** | DIF上穿DEA，且在零轴之上最强 | ↗DIF ↗DEA |
| **死叉（卖出）** | DIF下穿DEA，且在零轴之下最弱 | ↘DIF ↘DEA |
| **零轴上方** | 多头市场，持股为主 | 正值区 |
| **零轴下方** | 空头市场，空仓为主 | 负值区 |

### 2. 柱状图应用

```
        柱子变长 → 动能增强
        柱子变短 → 动能减弱

多头：
  ▂▄▆█  柱子伸长 → 买加仓
  ▂▄▆▅  柱子缩短 → 警惕
  ▂▄    柱子缩短 → 减仓

空头：
      █▆▄▂  柱子伸长 → 空加仓
      ▅▆▄▂  柱子缩短 → 警惕
        ▄▂  柱子缩短 → 平空
```

### 3. 背离信号（重要！）

**顶背离（看跌）**：
```
价格：           ↑ 创新高
MACD：           ↗ ↘  未创新高
                  |
                 背离！可能下跌
```

**底背离（看涨）**：
```
价格：           ↘ 创新低
MACD：           ↘ ↗  未创新低
                  |
                 背离！可能上涨
```

### 4. 多级别共振

最佳信号：多个时间周期同时出现金叉

```
日线：   金叉 ✓
周线：   金叉 ✓
月线：   金叉 ✓

→ 强势买入信号！
```

### 5. 典型形态

| 形态 | 含义 | 操作 |
|------|------|------|
| 低位二次金叉 | 双底确认 | 买入 |
| 高位二次死叉 | 双顶确认 | 卖出 |
| 零轴上金叉 | 强势延续 | 加仓 |
| 零轴下死叉 | 弱势延续 | 观望 |

### A股实战注意事项

1. **T+1限制**：金叉出现当天不能卖出，需提前规划
2. **涨跌停影响**：涨停后MACD可能持续高位，失去参考意义
3. **成交量验证**：
   - 金叉+放量 = 可靠信号
   - 金叉+缩量 = 可能是假信号
4. **A股特色**：
   - 政策利好会导致MACD失效（直接涨停）
   - 龙头股MACD可能长期高位钝化

### 常见陷阱

| 陷阱 | 说明 | 应对 |
|------|------|------|
| 震荡市频繁金叉死叉 | 横盘时指标反复交叉 | 震荡市停用或用更长参数 |
| 滞后性 | 趋势已反转信号才出现 | 结合K线形态和背离 |
| 高位钝化 | 强势股MACD长期高位不下穿 | 不等死叉，用KDJ判断卖点 |
| 假背离 | 背离后趋势继续 | 等确认信号（K线反转）再操作 |

---

## 四、学习资源

### 书籍
- **《以交易为生》** 第8章 - MACD详解
- **《MACD指标技术》** - 专门讲解MACD
- **《技术分析大全》** 第6章 - 振荡指标与趋势指标

### 在线教程
- [Investopedia: MACD](https://www.investopedia.com/terms/m/macd.asp)
- [东方财富：MACD指标详解](https://www.eastmoney.com/)
- [TradingView: MACD Strategy](https://www.tradingview.com/wiki/MACD)

### 视频课程
- B站："MACD指标实战教程"
- YouTube："MACD Trading Strategy"

### 实战练习
1. TradingView 上观察 MACD 柱状图变化
2. 找5个底背离和顶背离案例
3. 记录金叉后涨跌概率

---

## 速查表

| 情况 | 操作 | 信心 |
|------|------|------|
| 零轴上金叉+放量 | 买入 | ★★★★★ |
| 零轴下金叉+缩量 | 观望 | ★★ |
| 高位顶背离 | 卖出 | ★★★★ |
| 低位底背离 | 买入 | ★★★★ |
| 震荡市交叉 | 不操作 | - |

---

## 下一步学习

掌握MACD后，继续学习：
- [03. RSI](./03-rsi.md) - 判断超买超卖
- [08. KDJ](./08-kdj.md) - 短期交易信号
- [01. 移动平均线](./01-moving-average.md) - 回顾基础

---

**要点总结**：
- MACD = EMA(12) - EMA(26)，趋势动能双判断
- 零轴上金叉最强，底背离是提前信号
- 震荡市慎用，趋势市效果好
- A股注意T+1，结合成交量判断
