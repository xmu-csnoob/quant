# 交易策略：什么是交易信号？

## 什么是交易信号？

**交易信号**就是"买"或"卖"的建议。

```
价格数据 + 技术指标 + 规则 → 交易信号
```

## 最简单的策略：MA 金叉

**规则：**
- 当 MA5 上穿 MA20 → 买入信号
- 当 MA5 下穿 MA20 → 卖出信号

**为什么这样定义？**
- MA5 是短期趋势，MA20 是中期趋势
- 短期趋势向上突破中期趋势 → 可能开始上涨 → 买入
- 短期趋势向下跌破中期趋势 → 可能开始下跌 → 卖出

## 图示说明

```
价格
 ↑                    /-----← MA5
 |                   /
 |          /-------×------- 金叉（买入点）
 |         /        \
 |--------/--------- \----← MA20
 |
 |
 +------------------------------------------------→ 时间
```

## 用 Python 实现简单策略

```python
import pandas as pd

def generate_signals(df):
    """生成交易信号"""

    # 计算 MA5 和 MA20
    df['MA5'] = df['收盘'].rolling(window=5).mean()
    df['MA20'] = df['收盘'].rolling(window=20).mean()

    # 初始化信号列
    df['信号'] = '持有'

    # 遍历每一天（从第21天开始，因为MA20需要20天数据）
    for i in range(20, len(df)):
        today_ma5 = df.loc[i, 'MA5']
        today_ma20 = df.loc[i, 'MA20']
        yesterday_ma5 = df.loc[i-1, 'MA5']
        yesterday_ma20 = df.loc[i-1, 'MA20']

        # 金叉：MA5 上穿 MA20
        if yesterday_ma5 <= yesterday_ma20 and today_ma5 > today_ma20:
            df.loc[i, '信号'] = '买入'

        # 死叉：MA5 下穿 MA20
        elif yesterday_ma5 >= yesterday_ma20 and today_ma5 < today_ma20:
            df.loc[i, '信号'] = '卖出'

    return df
```

## 信号的三种状态

| 信号 | 含义 | 操作 |
|------|------|------|
| 买入 | 预期上涨 | 买入股票 |
| 卖出 | 预期下跌 | 卖出股票 |
| 持有 | 观望 | 不操作 |

## 策略的关键要素

**1. 入场条件**
- 什么时候买入？（如：MA金叉）

**2. 出场条件**
- 什么时候卖出？（如：MA死叉）

**3. 风险控制**
- 亏损多少就止损？（如：下跌8%止损）
- 盈利多少就止盈？（如：上涨15%止盈）

## 更复杂的信号

可以结合多个条件：

```python
# 综合信号示例
if ma5 > ma20 and rsi < 70 and volume > avg_volume:
    信号 = '买入'  # 趋势向上 + 未超买 + 成交量放大
```

## 下一步

有了交易信号，我们需要**回测**——看看这个策略在过去表现如何。
